{% extends "layout.jinja2" %}

{% block content %}
<script>
function check_password(){
    if(document.getElementById("password").value != document.getElementById("ch_password").value){
        if(document.getElementById("submit").disabled == false){
            document.getElementById("submit").disabled = true;
            document.getElementById("ch_div").innerHTML += "<div class='alert alert-danger' id = 'input_err'>The two passwords does not match!</div>";
        }
    }
    else{
        if(document.getElementById("input_err") != null){
            document.getElementById("input_err").parentElement.removeChild(document.getElementById("input_err"));
            document.getElementById("submit").disabled = false;
        }
    }
}

</script>
<div class = "container">
    <h2> Please register </h2>
    <form action = "/register" method = "POST">
        <div class="form-group">
        <label for="username">Username:</label>
        <input type = "text" class = "form-control" name = "username" minlength = "6" maxlength = "25" pattern = "[a-zA-Z0-9-_.]{6,25}" placeholder = "Username" required/>
        </div>
        <div class="form-group">
        <label for="name">Name:</label>
        <input type = "text" class = "form-control" name = "name" minlength = "6" maxlength = "30" pattern = "[a-zA-Z0-9-_ ]{6,30}" placeholder = "Name" required/>
        </div>
        <div class="form-group">
        <label for="email">Email:</label>
        <input type = "email" class = "form-control" name = "email" minlength = "6" maxlength = "45" placeholder = "Email" required/>
        </div>
        <div class="form-group">
        <label for="phone">Phone number:</label>
        <input type = "text" class = "form-control" name = "phone" minlength = "10" maxlength = "15" pattern = "(\+[0-9]{11,})|([0-9]{10,})" placeholder = "Phone" required/>
        </div>
        <div class="form-group">
        <label for="num_plate">Number plate:</label>
        <input type = "text" class = "form-control" name = "num_plate" minlength = "6" maxlength = "10" pattern = "(^[a-zA-Z]{1,2})( ?)([0-9]{2,3})( ?)([a-zA-Z]{3})|((^[a-zA-Z]{1,2})( ?)([0-9]){6})" placeholder = "Number plate" required/>
        </div>
        <div class="form-group">
        <label for="password">Password:</label>
        <input type = "password" class = "form-control" id = "password" name = "password" minlength = "6" maxlength = "20" pattern = "[a-zA-Z0-9-_.,?!@#$&*<>:;]{6,20}" placeholder = "Password" onchange = "check_password()" required/>
        </div>
        <div class="form-group" id = "ch_div">
        <label for="ch_password">Retype password:</label>
        <input type = "password" class = "form-control" id = "ch_password" name = "ch_password" minlength = "6" maxlength = "20" pattern = "[a-zA-Z0-9-_.,?!@#$&*<>:;]{6,20}" placeholder = "Retype password" onchange = "check_password()" required/>
        </div>
        <div class="form-group" id = "addr">
        <label for="addr">Address:</label>
        <input type = "text" class = "form-control" id = "addr" name = "addr" placeholder = "Address" required/><br/>
        </div>
        <button type = "submit" id = "submit" name = "register" class = "btn btn-warning">Register</button>
    </form>
    <br/>
    {% if credential_error is defined %}
      <div class="alert alert-danger">
        Invalid user data! Please try again.
      </div>
    {% endif %}
    {% if username_error is defined %}
      <div class="alert alert-danger">
        Username already occupied! Please choose another.
      </div>
    {% endif %}
    {% if successfully_registered is defined %}
      <div class="alert alert-success">
        Successfully registered! You can now login, using your credentials!
      </div>
    {% endif %}
</div>
{% endblock content %}

{% extends "layout.jinja2" %}

{% block content %}
<div class = "container">
    <h2> My account </h2>
    <form action = "/account" method = "POST">
        <div class="form-group">
        <label for="username">Username:</label>
        <input type = "text" class = "form-control" value = "{{ data[0][0] }}" name = "username" placeholder = "Username" style = "cursor: not-allowed;" disabled/>
        </div>
        <div class="form-group">
        <label for="name">Name:</label>
        <input type = "text" class = "form-control" title = "Min 6, Max 30 chars. Use only alphanumerical characters and space." value = "{{ data[0][1] }} " name = "name" minlength = "6" maxlength = "30" pattern = "[a-zA-Z0-9-_ ]{6,30}" placeholder = "Name" required/>
        </div>
        <div class="form-group">
        <label for="email">Email:</label>
        <input type = "email" class = "form-control" title = "Min 6, Max 45 chars." value = "{{ data[0][2] }}" name = "email" minlength = "6" maxlength = "45" placeholder = "Email" required/>
        </div>
        <div class="form-group">
        <label for="phone">Phone number:</label>
        <input type = "text" class = "form-control" title = "Format: +40700000000 or 0700000000" value = "{{ data[0][3] }}" name = "phone" minlength = "10" maxlength = "15" pattern = "(\+[0-9]{11,})|([0-9]{10,})" placeholder = "Phone" required/>
        </div>

          <div class="form-group">
          <label for="num_plate">Number plates:</label>
          <span class="input-group-btn">
              <button class="btn btn-success" type="button" style="margin-bottom: 1%;" onclick = "add_new_num_plate()">Add</button>
            </span>
        <div id = "num_plates_div">
        {% for i in data %}

          <div class="input-group">
            <input type = "text" class = "form-control" title = "Format CV 99 MEL or CV99MEL" value = "{{ i[4] }}" name = "num_plate" id = "num_plate{{loop.index}}" minlength = "6" maxlength = "10" pattern = "(^[a-zA-Z]{1,2})( ?)([0-9]{2,3})( ?)([a-zA-Z]{3})|((^[a-zA-Z]{1,2})( ?)([0-9]){6})" placeholder = "Number plate" style = "margin-bottom: 1%; cursor:not-allowed" disabled required/>
            <span class="input-group-btn">
              <button class="btn btn-danger" type="button" id = "delete{{loop.index}}" onclick="delete_num_plate({{loop.index}})">Delete</button>
            </span>
          </div>
        {% endfor %}
      </div>

        </div>
        <button type = "submit" name = "update" class = "btn btn-warning">Update</button>
    </form>
    <br/>
    {% if credential_error is defined %}
      <div class="alert alert-danger">
        Invalid user data! Please try again.
      </div>
    {% endif %}
    {% if username_error is defined %}
      <div class="alert alert-danger">
        Username already occupied! Please choose another.
      </div>
    {% endif %}
    {% if successfully_registered is defined %}
      <div class="alert alert-success">
        Successfully registered! You can now login, using your credentials!
      </div>
    {% endif %}
</div>
{% endblock content %}
